# Notifications Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞–º –∏ –º–∞—Å—Ç–µ—Ä–∞–º.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –î–∏—Ä–µ–∫—Ç–æ—Ä–∞–º üì¢
- üÜï **–ù–æ–≤—ã–π –∑–∞–∫–∞–∑** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä—É –≥–æ—Ä–æ–¥–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- üìÖ **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã –≤—Å—Ç—Ä–µ—á–∏** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –¥–∞—Ç—ã
- ‚ùå **–û—Ç–∫–∞–∑ –æ—Ç –∑–∞–∫–∞–∑–∞** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–∞
- üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥–∞–º

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ú–∞—Å—Ç–µ—Ä–∞–º üîß
- üë∑ **–ù–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –∑–∞–∫–∞–∑** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –º–∞—Å—Ç–µ—Ä–∞
- üìÖ **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã –≤—Å—Ç—Ä–µ—á–∏** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–Ω–æ—Å–µ –¥–∞—Ç—ã (–µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä —É–∂–µ –Ω–∞–∑–Ω–∞—á–µ–Ω)
- ‚ùå **–û—Ç–∫–∞–∑ –æ—Ç –∑–∞–∫–∞–∑–∞** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–º–µ–Ω–µ (–µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä —É–∂–µ –Ω–∞–∑–Ω–∞—á–µ–Ω)
- ‚úÖ **–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞–∫–∞–∑–∞
- üîí **–ó–∞–∫–∞–∑ –∑–∞–∫—Ä—ã—Ç** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∑–∞–∫–∞–∑–∞
- üïê **–ó–∞–∫–∞–∑ –≤ –º–æ–¥–µ—Ä–Ω–µ** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Å –æ–∂–∏–¥–∞–µ–º–æ–π –¥–∞—Ç–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚ö†Ô∏è **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—å –∑–∞–∫–∞–∑** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ (—á–µ—Ä–µ–∑ 3—á, –ø–æ—Ç–æ–º –∫–∞–∂–¥—ã–µ 3—á)
- üìÜ **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ (—Ä–∞–∑ –≤ –¥–µ–Ω—å –≤ 10:00)

### –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –†–∞–∑–¥–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤ –∏ –º–∞—Å—Ç–µ—Ä–æ–≤
- –°—Ç–∞—Ç—É—Å—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ (pending, sent, failed)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –ø–æ–ª—É—á–∞—Ç–µ–ª—è, —Ç–∏–ø—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å—É

## API Endpoints

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –î–∏—Ä–µ–∫—Ç–æ—Ä–∞–º
- `POST /api/v1/notifications/send` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `POST /api/v1/notifications/new-order` - –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ (–î–∏—Ä–µ–∫—Ç–æ—Ä)
- `POST /api/v1/notifications/date-change` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã (–î–∏—Ä–µ–∫—Ç–æ—Ä + –ú–∞—Å—Ç–µ—Ä –µ—Å–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω)
- `POST /api/v1/notifications/order-rejection` - –û—Ç–∫–∞–∑ –æ—Ç –∑–∞–∫–∞–∑–∞ (–î–∏—Ä–µ–∫—Ç–æ—Ä + –ú–∞—Å—Ç–µ—Ä –µ—Å–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω)

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ú–∞—Å—Ç–µ—Ä–∞–º
- `POST /api/v1/notifications/master-assigned` - –ú–∞—Å—Ç–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –∑–∞–∫–∞–∑
- `POST /api/v1/notifications/order-accepted` - –ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –º–∞—Å—Ç–µ—Ä–æ–º
- `POST /api/v1/notifications/order-closed` - –ó–∞–∫–∞–∑ –∑–∞–∫—Ä—ã—Ç
- `POST /api/v1/notifications/order-in-modern` - –ó–∞–∫–∞–∑ –≤ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- `POST /api/v1/notifications/close-order-reminder` - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—å –∑–∞–∫–∞–∑
- `POST /api/v1/notifications/modern-closing-reminder` - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞

### –ò—Å—Ç–æ—Ä–∏—è –∏ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/v1/notifications/history` - –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `GET /api/v1/notifications/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–æ–∫

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –î–∏—Ä–µ–∫—Ç–æ—Ä–∞–º–∏
- `GET /api/v1/directors` - –°–ø–∏—Å–æ–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤
- `GET /api/v1/directors/:id` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–µ
- `PUT /api/v1/directors/:id/telegram` - –û–±–Ω–æ–≤–∏—Ç—å Telegram –¥–∞–Ω–Ω—ã–µ
- `PUT /api/v1/directors/:id/cities` - –û–±–Ω–æ–≤–∏—Ç—å –≥–æ—Ä–æ–¥–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ú–∞—Å—Ç–µ—Ä–∞–º–∏
- `GET /api/v1/masters` - –°–ø–∏—Å–æ–∫ –º–∞—Å—Ç–µ—Ä–æ–≤
- `GET /api/v1/masters/:id` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—Å—Ç–µ—Ä–µ
- `GET /api/v1/masters/by-cities?cities=–ú–æ—Å–∫–≤–∞,–°–∞—Ä–∞—Ç–æ–≤` - –ú–∞—Å—Ç–µ—Ä–∞ –ø–æ –≥–æ—Ä–æ–¥–∞–º
- `PUT /api/v1/masters/:id/telegram` - –û–±–Ω–æ–≤–∏—Ç—å Telegram –¥–∞–Ω–Ω—ã–µ
- `PUT /api/v1/masters/:id/cities` - –û–±–Ω–æ–≤–∏—Ç—å –≥–æ—Ä–æ–¥–∞ –º–∞—Å—Ç–µ—Ä–∞

## Environment Variables

```env
DATABASE_URL=postgresql://user:pass@host:port/db
JWT_SECRET=your-secret
PORT=5008
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_API_URL=https://api.telegram.org
WEBHOOK_TOKEN=your-webhook-secret

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—å –∑–∞–∫–∞–∑ (—Å—Ç–∞—Ç—É—Å: –ü—Ä–∏–Ω—è–ª/–í –ø—É—Ç–∏/–í —Ä–∞–±–æ—Ç–µ)
FIRST_REMINDER_HOURS=3       # –ü–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ N —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ dateMeeting (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)
REMINDER_INTERVAL_HOURS=3    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤ —á–∞—Å–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –º–æ–¥–µ—Ä–Ω–µ (—Å—Ç–∞—Ç—É—Å: –ú–æ–¥–µ—Ä–Ω)
MODERN_REMINDER_DAYS=3       # –ü–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ N –¥–Ω–µ–π (–µ—Å–ª–∏ –Ω–µ—Ç dateClosmod)
                             # –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 10:00
```

## –§–æ—Ä–º–∞—Ç—ã –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ (–î–∏—Ä–µ–∫—Ç–æ—Ä)
```json
{
  "orderId": 123,
  "city": "–°–∞—Ä–∞—Ç–æ–≤",
  "clientName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "phone": "+79001234567",
  "address": "—É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10",
  "dateMeeting": "2025-01-15T10:00:00Z",
  "problem": "–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫",
  "rk": "–Ø–Ω–¥–µ–∫—Å",
  "avitoName": "Avito_Saratov",
  "typeEquipment": "–ë–¢",
  "token": "your-webhook-secret"
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã (–î–∏—Ä–µ–∫—Ç–æ—Ä + –ú–∞—Å—Ç–µ—Ä)
```json
{
  "orderId": 123,
  "city": "–°–∞—Ä–∞—Ç–æ–≤",
  "clientName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "newDate": "2025-01-20T14:00:00Z",
  "oldDate": "2025-01-15T10:00:00Z",
  "masterId": 5,
  "token": "your-webhook-secret"
}
```

### –û—Ç–∫–∞–∑ –æ—Ç –∑–∞–∫–∞–∑–∞ (–î–∏—Ä–µ–∫—Ç–æ—Ä + –ú–∞—Å—Ç–µ—Ä)
```json
{
  "orderId": 123,
  "city": "–°–∞—Ä–∞—Ç–æ–≤",
  "clientName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "phone": "+79001234567",
  "reason": "–ö–ª–∏–µ–Ω—Ç –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç —É—Å–ª—É–≥–∏",
  "masterId": 5,
  "token": "your-webhook-secret"
}
```

### –ú–∞—Å—Ç–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –∑–∞–∫–∞–∑
```json
{
  "orderId": 123,
  "masterId": 5,
  "rk": "–Ø–Ω–¥–µ–∫—Å",
  "avitoName": "Avito_Saratov",
  "typeEquipment": "–ë–¢",
  "clientName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "address": "—É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10",
  "dateMeeting": "2025-01-15T10:00:00Z",
  "token": "your-webhook-secret"
}
```

### –ó–∞–∫–∞–∑ –≤ –º–æ–¥–µ—Ä–Ω–µ
```json
{
  "orderId": 123,
  "masterId": 5,
  "expectedClosingDate": "2025-01-20T00:00:00Z",
  "clientName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "token": "your-webhook-secret"
}
```

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∑–∞–∫–∞–∑–∞
```json
{
  "orderId": 123,
  "masterId": 5,
  "clientName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "daysOverdue": 3,
  "token": "your-webhook-secret"
}
```

## –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

> üí° –®–∞–±–ª–æ–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥ –≤ —Ñ–∞–π–ª–µ `src/notifications/message-templates.ts`

### –î–ª—è –î–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤

#### new_order
```
üÜï –ü–æ—Å—Ç—É–ø–∏–ª –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ ‚Ññ{orderId}

–†–ö: {rk}
–ê–≤–∏—Ç–æ: {avitoName}
–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: {typeEquipment}

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: {phone}
üìç –ê–¥—Ä–µ—Å: {address}
üóì –î–∞—Ç–∞ –≤—Å—Ç—Ä–µ—á–∏: {dateMeeting}
üîß –ü—Ä–æ–±–ª–µ–º–∞: {problem}
üèô –ì–æ—Ä–æ–¥: {city}
```

#### date_change
```
üìÖ –ó–∞–∫–∞–∑ ‚Ññ{orderId} –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –Ω–∞ {newDate}

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üèô –ì–æ—Ä–æ–¥: {city}
```

#### order_rejection
```
‚ùå –ó–∞–∫–∞–∑ ‚Ññ{orderId} –û—Ç–º–µ–Ω–µ–Ω

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: {phone}
üí¨ –ü—Ä–∏—á–∏–Ω–∞: {reason}
üèô –ì–æ—Ä–æ–¥: {city}
```

### –î–ª—è –ú–∞—Å—Ç–µ—Ä–æ–≤

#### master_assigned
```
üë∑ –í–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω –∑–∞–∫–∞–∑ ‚Ññ{orderId}

–†–ö: {rk}
–ê–≤–∏—Ç–æ: {avitoName}
–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: {typeEquipment}

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üìç –ê–¥—Ä–µ—Å: {address}
üóì –î–∞—Ç–∞ –≤—Å—Ç—Ä–µ—á–∏: {dateMeeting}

‚ö†Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –¶–†–ú!
```

#### date_change (–¥–ª—è –º–∞—Å—Ç–µ—Ä–∞)
```
üìÖ –ó–∞–∫–∞–∑ ‚Ññ{orderId} –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –Ω–∞ {newDate}

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
```

#### order_rejection (–¥–ª—è –º–∞—Å—Ç–µ—Ä–∞)
```
‚ùå –ó–∞–∫–∞–∑ ‚Ññ{orderId} –û—Ç–º–µ–Ω–µ–Ω

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üí¨ –ü—Ä–∏—á–∏–Ω–∞: {reason}
```

#### order_accepted
```
‚úÖ –ó–∞–∫–∞–∑ ‚Ññ{orderId} –ø—Ä–∏–Ω—è—Ç

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
```

#### order_closed
```
üîí –ó–∞–∫–∞–∑ ‚Ññ{orderId} –∑–∞–∫—Ä—ã—Ç

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: {closingDate}
```

#### order_in_modern
```
üïê –ó–∞–∫–∞–∑ ‚Ññ{orderId} –≤ –º–æ–¥–µ—Ä–Ω–µ

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üìÜ –û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: {expectedClosingDate}
```

#### close_order_reminder
```
‚ö†Ô∏è –ó–∞–∫—Ä–æ–π—Ç–µ –∑–∞–∫–∞–∑ ‚Ññ{orderId}

üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
‚è∞ –ü—Ä–æ—Å—Ä–æ—á–µ–Ω –Ω–∞ {daysOverdue} –¥–Ω.
```

#### modern_closing_reminder

–ù–µ—Ç –¥–∞—Ç—ã:
```
üìÜ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞

üìã –ó–∞–∫–∞–∑ ‚Ññ{orderId}
üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: –ù–µ —É–∫–∞–∑–∞–Ω–æ
‚ö†Ô∏è –ù—É–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –º–æ–¥–µ—Ä–Ω!
```

–í –¥–µ–Ω—å –∑–∞–∫—Ä—ã—Ç–∏—è:
```
üìÜ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞

üìã –ó–∞–∫–∞–∑ ‚Ññ{orderId}
üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: {expectedClosingDate}
‚è∞ –°–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å –∑–∞–∫—Ä—ã—Ç–∏—è!
```

–ü—Ä–æ—Å—Ä–æ—á–∫–∞:
```
üìÜ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞

üìã –ó–∞–∫–∞–∑ ‚Ññ{orderId}
üë§ –ö–ª–∏–µ–Ω—Ç: {clientName}
üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: {expectedClosingDate}
‚ö†Ô∏è –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –Ω–∞ {daysOverdue} –¥–Ω.
```

## Docker

```bash
docker build -t notifications-service .
docker run -p 5008:5008 notifications-service
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env` –∫–∞–∫ `TELEGRAM_BOT_TOKEN`
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WEBHOOK_TOKEN –¥–ª—è –∑–∞—â–∏—Ç—ã API

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –î–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤
1. –î–∏—Ä–µ–∫—Ç–æ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ `tgId` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ (chat_id)
3. –û–±–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ API:
```bash
PUT /api/v1/directors/:id/telegram
{
  "tgId": "123456789"
}
```
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≥–æ—Ä–æ–¥–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞:
```bash
PUT /api/v1/directors/:id/cities
{
  "cities": ["–ú–æ—Å–∫–≤–∞", "–°–∞—Ä–∞—Ç–æ–≤"]
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ú–∞—Å—Ç–µ—Ä–æ–≤
1. –ú–∞—Å—Ç–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ `tgId` –∏ `chatId` –º–∞—Å—Ç–µ—Ä–∞
3. –û–±–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ API:
```bash
PUT /api/v1/masters/:id/telegram
{
  "tgId": "987654321",
  "chatId": "987654321"
}
```
4. –ì–æ—Ä–æ–¥–∞ –º–∞—Å—Ç–µ—Ä–∞ –æ–±—ã—á–Ω–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î

## –¢–∏–ø—ã –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ –°—Ü–µ–Ω–∞—Ä–∏—è–º

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–ø–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑
**–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç**: –î–∏—Ä–µ–∫—Ç–æ—Ä –≥–æ—Ä–æ–¥–∞ –∑–∞–∫–∞–∑–∞  
**Endpoint**: `POST /api/v1/notifications/new-order`  
**–°–æ–æ–±—â–µ–Ω–∏–µ**: "–ü–æ—Å—Ç—É–ø–∏–ª –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ ‚Ññ... –†–ö: ... –ê–≤–∏—Ç–æ: ... –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ë–¢"

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–ø–µ—Ä–∞—Ç–æ—Ä –º–µ–Ω—è–µ—Ç –¥–∞—Ç—É –≤—Å—Ç—Ä–µ—á–∏
**–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç**: –î–∏—Ä–µ–∫—Ç–æ—Ä –≥–æ—Ä–æ–¥–∞ + –ú–∞—Å—Ç–µ—Ä (–µ—Å–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω)  
**Endpoint**: `POST /api/v1/notifications/date-change`  
**–ü–∞—Ä–∞–º–µ—Ç—Ä**: `masterId` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
**–°–æ–æ–±—â–µ–Ω–∏–µ**: "–ó–∞–∫–∞–∑ ‚Ññ... –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –Ω–∞ 10.10.2025 15:00"

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–ø–µ—Ä–∞—Ç–æ—Ä –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "–û—Ç–∫–∞–∑/–ù–µ–∑–∞–∫–∞–∑"
**–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç**: –î–∏—Ä–µ–∫—Ç–æ—Ä –≥–æ—Ä–æ–¥–∞ + –ú–∞—Å—Ç–µ—Ä (–µ—Å–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω)  
**Endpoint**: `POST /api/v1/notifications/order-rejection`  
**–ü–∞—Ä–∞–º–µ—Ç—Ä**: `masterId` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
**–°–æ–æ–±—â–µ–Ω–∏–µ**: "–ó–∞–∫–∞–∑ ‚Ññ... –û—Ç–º–µ–Ω–µ–Ω"

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –î–∏—Ä–µ–∫—Ç–æ—Ä –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞ –∑–∞–∫–∞–∑
**–ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç**: –ú–∞—Å—Ç–µ—Ä  
**Endpoint**: `POST /api/v1/notifications/master-assigned`  
**–ü–∞—Ä–∞–º–µ—Ç—Ä**: `masterId` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)  
**–°–æ–æ–±—â–µ–Ω–∏–µ**: "–í–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω –∑–∞–∫–∞–∑ ‚Ññ... –†–ö: ... –ê–≤–∏—Ç–æ: ... –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ë–¢. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –¶–†–ú!"

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤:
- **–ó–∞–∫–∞–∑ –≤ –º–æ–¥–µ—Ä–Ω–µ**: `POST /api/v1/notifications/order-in-modern`
- **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—å**: `POST /api/v1/notifications/close-order-reminder`
- **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –º–æ–¥–µ—Ä–Ω–µ**: `POST /api/v1/notifications/modern-closing-reminder`

---

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (Cron Jobs)

Notifications-service **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–∫–∞–∑—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞–º –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

### 1. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—å –∑–∞–∫–∞–∑ ‚ö†Ô∏è

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∂–¥—ã–π —á–∞—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–∫–∞–∑—ã  

**–£—Å–ª–æ–≤–∏—è**:
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: `"–ü—Ä–∏–Ω—è–ª"`, `"–í –ø—É—Ç–∏"` –∏–ª–∏ `"–í —Ä–∞–±–æ—Ç–µ"`
- –ú–∞—Å—Ç–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –∑–∞–∫–∞–∑

**–õ–æ–≥–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π**:
1. **–ü–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ** ‚Üí —á–µ—Ä–µ–∑ **3 —á–∞—Å–∞** –ø–æ—Å–ª–µ `dateMeeting`
   - –í—Å—Ç—Ä–µ—á–∞ –≤ 10:00 ‚Üí –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ 13:00
2. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** ‚Üí –∫–∞–∂–¥—ã–µ **3 —á–∞—Å–∞** –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
   - 13:00 ‚Üí 16:00 ‚Üí 19:00 ‚Üí 22:00 ‚Üí –∏ —Ç.–¥.
3. **–ü–æ–∫–∞ –º–∞—Å—Ç–µ—Ä –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç** –∑–∞–∫–∞–∑ (—Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è)

**–ü—Ä–∏–º–µ—Ä**:
```
üìÖ –î–∞—Ç–∞ –≤—Å—Ç—Ä–µ—á–∏: 10.10.2025 10:00
üìã –°—Ç–∞—Ç—É—Å: "–ü—Ä–∏–Ω—è–ª"

‚è∞ 13:00 ‚Üí 1-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚úâÔ∏è
‚è∞ 16:00 ‚Üí 2-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚úâÔ∏è
‚è∞ 19:00 ‚Üí 3-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚úâÔ∏è
‚è∞ 22:00 ‚Üí 4-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚úâÔ∏è
... –ø–æ–∫–∞ –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç
```

**–ö–æ–¥ –ª–æ–≥–∏–∫–∏**:
```typescript
// –ü–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —á–∞—Å–∞
if (hoursSinceMeeting >= 3 && !lastNotification) {
  sendReminder();
}

// –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞
if (hoursSinceLastReminder >= 3) {
  sendReminder();
}
```

**–°–æ–æ–±—â–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä—É**:
```
‚ö†Ô∏è –ó–∞–∫—Ä–æ–π—Ç–µ –∑–∞–∫–∞–∑ ‚Ññ123
üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
‚è∞ –ü—Ä–æ—Å—Ä–æ—á–µ–Ω –Ω–∞ 0 –¥–Ω.
```

### 2. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞ üìÜ

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 10:00  
**–£—Å–ª–æ–≤–∏—è**: –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ `"–ú–æ–¥–µ—Ä–Ω"` –∏ –º–∞—Å—Ç–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ù–ï–¢ –¥–∞—Ç—ã –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–µ—Ä–Ω–∞ (`dateClosmod = null`)

**–õ–æ–≥–∏–∫–∞**:
1. **–ü–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ** ‚Üí —á–µ—Ä–µ–∑ **3 –¥–Ω—è** –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ "–ú–æ–¥–µ—Ä–Ω"
2. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** ‚Üí **–∫–∞–∂–¥—ã–π –¥–µ–Ω—å** –≤ 10:00

**–ü—Ä–∏–º–µ—Ä**:
```
–°—Ç–∞—Ç—É—Å "–ú–æ–¥–µ—Ä–Ω" —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: 01.11.2025
dateClosmod: null

üìÖ 04.11.2025 10:00 ‚Üí 1-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚úâÔ∏è
üìÖ 05.11.2025 10:00 ‚Üí 2-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚úâÔ∏è
üìÖ 06.11.2025 10:00 ‚Üí 3-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚úâÔ∏è
... –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø–æ–∫–∞ –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç
```

**–°–æ–æ–±—â–µ–Ω–∏–µ**:
```
üìÜ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞
üìã –ó–∞–∫–∞–∑ ‚Ññ123
üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: –ù–µ —É–∫–∞–∑–∞–Ω–æ
‚ö†Ô∏è –ù—É–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –º–æ–¥–µ—Ä–Ω!
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ï–°–¢–¨ –¥–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–µ—Ä–Ω–∞ (`dateClosmod != null`)

**–õ–æ–≥–∏–∫–∞**:
1. **–í –¥–µ–Ω—å –∑–∞–∫—Ä—ã—Ç–∏—è** ‚Üí –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ 10:00
2. **–ï—Å–ª–∏ –Ω–µ –∑–∞–∫—Ä—ã–ª** ‚Üí –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 10:00 –æ –ø—Ä–æ—Å—Ä–æ—á–∫–µ

**–ü—Ä–∏–º–µ—Ä**:
```
dateClosmod: 05.11.2025

üìÖ 05.11.2025 10:00 ‚Üí "–°–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å –∑–∞–∫—Ä—ã—Ç–∏—è!" ‚úâÔ∏è
üìÖ 06.11.2025 10:00 ‚Üí "–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –Ω–∞ 1 –¥–Ω." ‚úâÔ∏è
üìÖ 07.11.2025 10:00 ‚Üí "–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –Ω–∞ 2 –¥–Ω." ‚úâÔ∏è
... –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø–æ–∫–∞ –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç
```

**–°–æ–æ–±—â–µ–Ω–∏—è**:

–î–µ–Ω—å –∑–∞–∫—Ä—ã—Ç–∏—è:
```
üìÜ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞
üìã –ó–∞–∫–∞–∑ ‚Ññ123
üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: 05.11.2025
‚è∞ –°–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å –∑–∞–∫—Ä—ã—Ç–∏—è!
```

–ü—Ä–æ—Å—Ä–æ—á–∫–∞:
```
üìÜ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–µ—Ä–Ω–∞
üìã –ó–∞–∫–∞–∑ ‚Ññ123
üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: 05.11.2025
‚ö†Ô∏è –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –Ω–∞ 2 –¥–Ω.
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

–í `.env`:
```bash
# –ü–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞ –≤–º–µ—Å—Ç–æ 3
FIRST_REMINDER_HOURS=2

# –ü–æ–≤—Ç–æ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞ –≤–º–µ—Å—Ç–æ 3
REMINDER_INTERVAL_HOURS=2

# –ú–æ–¥–µ—Ä–Ω (–±–µ–∑ –¥–∞—Ç—ã): –ø–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 2 –¥–Ω—è –≤–º–µ—Å—Ç–æ 3
MODERN_REMINDER_DAYS=2
```

**–ü—Ä–∏–º–µ—Ä**: –ï—Å–ª–∏ —Ö–æ—á–µ—à—å —á—Ç–æ–±—ã –Ω–∞–ø–æ–º–∏–Ω–∞–ª–∏ —á–∞—â–µ:
```bash
FIRST_REMINDER_HOURS=1     # –ü–µ—Ä–≤–æ–µ —á–µ—Ä–µ–∑ 1 —á–∞—Å
REMINDER_INTERVAL_HOURS=1   # –ü–æ—Ç–æ–º –∫–∞–∂–¥—ã–π —á–∞—Å
```

### –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å cron-–∑–∞–¥–∞—á–∏, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@Cron` –≤ —Ñ–∞–π–ª–µ:
```
src/reminders/reminders.service.ts
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

–í `src/reminders/reminders.service.ts`:

```typescript
// –í–º–µ—Å—Ç–æ –∫–∞–∂–¥–æ–≥–æ —á–∞—Å–∞ - –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
@Cron('*/30 * * * *')

// –í–º–µ—Å—Ç–æ 10:00 - –≤ 9:00 –∏ 18:00
@Cron('0 9,18 * * *')
```

[–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä cron –≤—ã—Ä–∞–∂–µ–Ω–∏–π](https://crontab.guru/)

